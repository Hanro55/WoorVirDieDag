<!DOCTYPE html>
<html lang="af">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Woord van die Dag ðŸ‡¿ðŸ‡¦</title>
<style>
  /* Algemene styl */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    background: #f3f4f6;
    color: #333;
    overflow-x: hidden;
  }

  h1, h2, h3 {
    text-align: center;
  }

  /* Hamburger menu knop */
  #hamburger {
    position: fixed;
    top: 15px;
    left: 15px;
    width: 35px;
    height: 30px;
    cursor: pointer;
    z-index: 2000;
  }
  #hamburger div {
    background-color: #333;
    height: 4px;
    margin: 5px 0;
    border-radius: 2px;
  }

  /* Sidebar */
  #sidebar {
    position: fixed;
    top: 0; left: 0;
    width: 280px;
    height: 100vh;
    background-color: #fff;
    box-shadow: 2px 0 12px rgba(0,0,0,0.15);
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    overflow-y: auto;
    padding: 20px;
    z-index: 1500;
  }
  #sidebar.open {
    transform: translateX(0);
  }
  #close-sidebar {
    font-size: 30px;
    border: none;
    background: none;
    cursor: pointer;
    display: block;
    margin-left: auto;
    margin-bottom: 10px;
  }

  /* Sidebar inhoud */
  #sidebar h2 {
    margin-top: 0;
  }
  #sidebar p {
    margin: 6px 0;
  }
  #sidebar button {
    width: 100%;
    margin: 8px 0;
    padding: 10px;
    font-size: 1rem;
    cursor: pointer;
    border-radius: 8px;
    border: none;
    background-color: #6aaa64;
    color: white;
    transition: background-color 0.3s ease;
  }
  #sidebar button:hover {
    background-color: #519e50;
  }

  /* Statistiek staafgrafieke */
  #distribution-bars div.bar {
    background-color: #6aaa64;
    color: white;
    padding: 4px 8px;
    margin: 6px 0;
    border-radius: 12px;
    font-size: 0.85rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Woorde lys */
  #woord-lys {
    max-height: 130px;
    overflow-y: auto;
    padding: 5px 0;
    border: 1px solid #ddd;
    border-radius: 10px;
    background: #fafafa;
  }
  #woord-lys span {
    display: inline-block;
    background: #ddd;
    margin: 3px 5px;
    padding: 5px 10px;
    border-radius: 15px;
    font-weight: 600;
    user-select: none;
  }

  /* Bord van raaiskote */
  #board {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
    max-width: 350px;
    margin: 80px auto 20px auto;
  }
  .tile {
    width: 60px;
    height: 60px;
    border: 2px solid #ccc;
    border-radius: 12px;
    font-size: 2rem;
    font-weight: bold;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    background-color: white;
  }
  .correct {
    background-color: #6aaa64;
    color: white;
    border: none;
  }
  .present {
    background-color: #c9b458;
    color: white;
    border: none;
  }
  .absent {
    background-color: #787c7e;
    color: white;
    border: none;
  }

  /* Invoer veld en knoppie */
  #guess-input {
    width: 320px;
    max-width: 90vw;
    font-size: 1.3rem;
    padding: 12px;
    border-radius: 12px;
    border: 2px solid #ccc;
    text-transform: uppercase;
    margin: 10px auto;
    display: block;
    letter-spacing: 8px;
    text-align: center;
  }
  #submit-btn {
    display: block;
    margin: 10px auto 30px auto;
    padding: 12px 24px;
    font-size: 1.2rem;
    background-color: #6aaa64;
    border: none;
    border-radius: 12px;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  #submit-btn:disabled {
    background-color: #a5d6a7;
    cursor: not-allowed;
  }
  #submit-btn:hover:not(:disabled) {
    background-color: #519e50;
  }

  /* Sleutelbord */
  #keyboard {
    max-width: 350px;
    margin: 0 auto 30px auto;
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    gap: 8px;
    user-select: none;
  }
  .key {
    padding: 12px 0;
    border-radius: 8px;
    background-color: #ddd;
    font-weight: 700;
    cursor: pointer;
    text-transform: uppercase;
    font-size: 1rem;
    user-select: none;
  }
  .key.correct {
    background-color: #6aaa64;
    color: white;
  }
  .key.present {
    background-color: #c9b458;
    color: white;
  }
  .key.absent {
    background-color: #787c7e;
    color: white;
  }
  .key.special {
    grid-column: span 2;
    background-color: #6aaa64;
    color: white;
  }

  /* Boodskap */
  #message {
    text-align: center;
    font-weight: 700;
    font-size: 1.2rem;
    min-height: 30px;
    color: #b00020;
  }

  /* Modal style */
  #stats-modal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 3000;
  }
  #stats-modal.open {
    display: flex;
  }
  #stats-modal .modal-content {
    background: white;
    padding: 20px 25px;
    border-radius: 12px;
    max-width: 400px;
    width: 90vw;
    max-height: 80vh;
    overflow-y: auto;
    position: relative;
    font-size: 1rem;
  }
  #stats-modal .close-btn {
    position: absolute;
    top: 12px;
    right: 16px;
    background: none;
    border: none;
    font-size: 28px;
    cursor: pointer;
    color: #555;
  }
  #stats-modal h2 {
    margin-top: 0;
    margin-bottom: 15px;
    text-align: center;
  }
</style>
</head>
<body>

<!-- Hamburger menu -->
<div id="hamburger" aria-label="Menu" role="button" tabindex="0" aria-expanded="false" aria-controls="sidebar">
  <div></div><div></div><div></div>
</div>

<!-- Sidebar -->
<aside id="sidebar" aria-hidden="true">
  <button id="close-sidebar" aria-label="Sluit menu">&times;</button>
  <h2>Statistiek</h2>
  <p>Gespeel: <span id="total-played">0</span></p>
  <p>Wenkoers: <span id="win-rate">0%</span></p>
  <p>Huidige streek: <span id="current-streak">0</span></p>
  <p>Langste streek: <span id="best-streak">0</span></p>
  <p>Laas gespeel: <span id="last-play-date">Nog nie</span></p>

  <div id="distribution-bars"></div>

  <h3>Woorde in lys</h3>
  <div id="woord-lys"></div>
  <a href="#" onclick="deelNaWhatsapp()">ðŸ“¤ Deel Poging na WhatsApp</a>
  <button id="practice-btn">Oefen vorige dae</button>
  <button id="export-btn">Voer Statistiek Uit</button>
  <button id="import-btn">Voer Statistiek In</button>
</aside>

<!-- Titel -->
<h2>Woord van die Dag ðŸ‡¿ðŸ‡¦</h2>

<!-- Bord -->
<div id="board" aria-label="Raaiskoot bord"></div>

<!-- Invoer -->
<input id="guess-input" maxlength="5" placeholder="Tik 5-letter woord" aria-label="Tik jou raaiskoot hier" autocomplete="off" />
<button id="submit-btn" aria-label="Voer raaiskoot in">Voer in</button>

<div id="message" role="alert" aria-live="assertive"></div>

<!-- Sleutelbord -->
<div id="keyboard" aria-label="Virtuele sleutelbord"></div>

<!-- Modal vir statistiek -->
<div id="stats-modal" role="dialog" aria-modal="true" aria-labelledby="stats-title" tabindex="-1">
  <div class="modal-content">
    <button class="close-btn" aria-label="Sluit statistiek">&times;</button>
    <h2 id="stats-title">Jou Statistiek</h2>
    <div id="stats-summary"></div>
    <div id="distribution-bars-modal"></div>
    <button id="copy-results">ðŸ“‹ Deel jou resultate</button>
    <button id="whatsapp-share">ðŸ’¬ Deel via WhatsApp</button>
  </div>
</div>

<script>
(() => {
  "use strict";

  // --- Woordlys ---
  const woordLys = [
    "afrik", "beter", "klein", "woord", "speel", "skryf", "huisn", "vandag", "klank", "skool",
    "smaak", "maanl", "vraas", "ligte", "vlugte", "stuur", "kykna", "blywe", "groot", "dinge"
  ]; // Vul met jou eie lys

  const maxGuesses = 6;
  const wordLength = 5;

  // --- Seeded shuffle funksies (jou kode) ---
  function seededRandom(seed) {
    let x = Math.sin(seed) * 10000;
    return x - Math.floor(x);
  }

  function shuffleArraySeeded(arr, seed) {
    let a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(seededRandom(seed + i) * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function kryVandagWoord() {
    const vandag = new Date();
    const datumString = vandag.getFullYear() + "-" + (vandag.getMonth() + 1) + "-" + vandag.getDate();
    let seed = 0;
    for (let i = 0; i < datumString.length; i++) {
      seed += datumString.charCodeAt(i);
    }
    const geskommeldeLys = shuffleArraySeeded(woordLys, seed);
    return geskommeldeLys[0];
  }

  const teikenWoord = kryVandagWoord();

  // --- DOM elemente ---
  const board = document.getElementById("board");
  const guessInput = document.getElementById("guess-input");
  const submitBtn = document.getElementById("submit-btn");
  const messageDiv = document.getElementById("message");
  const keyboard = document.getElementById("keyboard");
  const sidebar = document.getElementById("sidebar");
  const hamburger = document.getElementById("hamburger");
  const closeSidebarBtn = document.getElementById("close-sidebar");
  const totalPlayedSpan = document.getElementById("total-played");
  const winRateSpan = document.getElementById("win-rate");
  const currentStreakSpan = document.getElementById("current-streak");
  const bestStreakSpan = document.getElementById("best-streak");
  const lastPlayDateSpan = document.getElementById("last-play-date");
  const distributionBarsDiv = document.getElementById("distribution-bars");
  const woordLysDiv = document.getElementById("woord-lys");
  const practiceBtn = document.getElementById("practice-btn");
  const exportBtn = document.getElementById("export-btn");
  const importBtn = document.getElementById("import-btn");
  const statsModal = document.getElementById("stats-modal");
  const statsCloseBtn = statsModal.querySelector(".close-btn");
  const statsSummary = document.getElementById("stats-summary");
  const distributionBarsModal = document.getElementById("distribution-bars-modal");
  const copyResultsBtn = document.getElementById("copy-results");
  const whatsappShareBtn = document.getElementById("whatsapp-share");

  // --- State ---
  let guesses = [];
  let isGameOver = false;
  let stats = {
    total: 0,
    wins: 0,
    currentStreak: 0,
    bestStreak: 0,
    lastPlayDate: null,
    distribution: {} // pogingNumber -> count
  };

  // --- Laai stats uit localStorage ---
  function loadStatsFromStorage() {
    const saved = localStorage.getItem("woordStats");
    if(saved) {
      try {
        const parsed = JSON.parse(saved);
        if(parsed && typeof parsed === "object") {
          stats = parsed;
        }
      } catch(e) {
        // ignore
      }
    }
  }

  // --- Stoor stats in localStorage ---
  function saveStatsToStorage() {
    localStorage.setItem("woordStats", JSON.stringify(stats));
  }

  // --- Laai speletjie state (pogings) ---
  function loadGameFromStorage() {
    const todayStr = new Date().toDateString();
    const savedDate = localStorage.getItem("woordPogingsDatum");
    if(savedDate !== todayStr) {
      localStorage.removeItem("woordPogings");
      localStorage.setItem("woordPogingsDatum", todayStr);
      guesses = [];
    } else {
      const savedGuesses = localStorage.getItem("woordPogings");
      guesses = savedGuesses ? JSON.parse(savedGuesses) : [];
    }
  }

  // --- Stoor pogings ---
  function saveGameToStorage() {
    localStorage.setItem("woordPogings", JSON.stringify(guesses));
    localStorage.setItem("woordPogingsDatum", new Date().toDateString());
  }

  // --- Maak bord ---
  function createBoard() {
    board.innerHTML = "";
    for(let i=0; i < maxGuesses * wordLength; i++) {
      const tile = document.createElement("div");
      tile.classList.add("tile");
      board.appendChild(tile);
    }
  }

  // --- Vertoon die raaiskote op bord ---
  function renderBoard() {
    for(let i=0; i < maxGuesses; i++) {
      const guess = guesses[i] || "";
      for(let j=0; j < wordLength; j++) {
        const tileIndex = i * wordLength + j;
        const tile = board.children[tileIndex];
        const letter = guess[j] || "";
        tile.textContent = letter.toUpperCase();
        tile.className = "tile"; // reset klasses

        if(i < guesses.length) {
          // Gradeer letters
          if(letter === teikenWoord[j]) {
            tile.classList.add("correct");
          } else if(teikenWoord.includes(letter)) {
            tile.classList.add("present");
          } else if(letter) {
            tile.classList.add("absent");
          }
        }
      }
    }
  }

  // --- Skep sleutelbord ---
  const keys = "qwertyuiopasdfghjklzxcvbnm".toUpperCase().split('');
  function createKeyboard() {
    keyboard.innerHTML = "";
    keys.forEach(key => {
      const keyBtn = document.createElement("button");
      keyBtn.textContent = key;
      keyBtn.classList.add("key");
      keyBtn.setAttribute("aria-label", `Letter ${key}`);
      keyBtn.addEventListener("click", () => {
        if(isGameOver) return;
        if(guessInput.value.length < wordLength) {
          guessInput.value += key.toLowerCase();
          guessInput.focus();
        }
      });
      keyboard.appendChild(keyBtn);
    });

    // Enter knop
    const enterBtn = document.createElement("button");
    enterBtn.textContent = "Enter";
    enterBtn.classList.add("key", "special");
    enterBtn.addEventListener("click", () => {
      submitGuess();
    });
    keyboard.appendChild(enterBtn);

    // Backspace knop
    const backBtn = document.createElement("button");
    backBtn.textContent = "Del";
    backBtn.classList.add("key", "special");
    backBtn.addEventListener("click", () => {
      guessInput.value = guessInput.value.slice(0, -1);
      guessInput.focus();
    });
    keyboard.appendChild(backBtn);
  }

  // --- Werk sleutelbord op volgens grade ---
  function updateKeyboard() {
    const allTiles = board.querySelectorAll(".tile");
    const letterStatus = {}; // letter -> "correct"/"present"/"absent"
    for(let tile of allTiles) {
      const letter = tile.textContent.toLowerCase();
      if(!letter) continue;
      if(tile.classList.contains("correct")) {
        letterStatus[letter] = "correct";
      } else if(tile.classList.contains("present")) {
        if(letterStatus[letter] !== "correct") {
          letterStatus[letter] = "present";
        }
      } else if(tile.classList.contains("absent")) {
        if(!letterStatus[letter]) {
          letterStatus[letter] = "absent";
        }
      }
    }
    keyboard.querySelectorAll(".key").forEach(keyBtn => {
      const letter = keyBtn.textContent.toLowerCase();
      keyBtn.classList.remove("correct", "present", "absent");
      if(letterStatus[letter]) {
        keyBtn.classList.add(letterStatus[letter]);
      }
    });
  }

  // --- Slegs letters toelaat ---
  guessInput.addEventListener("input", () => {
    guessInput.value = guessInput.value.replace(/[^a-zA-Z]/g, "").slice(0, wordLength).toLowerCase();
  });

  // --- Boodskap funksie ---
  function showMessage(msg, duration=3000) {
    messageDiv.textContent = msg;
    if(duration > 0) {
      setTimeout(() => {
        if(messageDiv.textContent === msg) {
          messageDiv.textContent = "";
        }
      }, duration);
    }
  }

  // --- Voer raaiskoot in ---
  function submitGuess() {
    if(isGameOver) return;
    const guess = guessInput.value.toLowerCase();
    if(guess.length !== wordLength) {
      showMessage(`Woorde moet presies ${wordLength} letters wees`);
      return;
    }
    if(!woordLys.includes(guess)) {
      showMessage("Woord nie in lys nie");
      return;
    }
    if(guesses.length >= maxGuesses) {
      showMessage("Jy het al jou pogings gebruik");
      return;
    }
    guesses.push(guess);
    saveGameToStorage();
    renderBoard();
    updateKeyboard();
    guessInput.value = "";
    guessInput.focus();

    if(guess === teikenWoord) {
      showMessage("ðŸŽ‰ Jy het gewen!");
      endGame(true);
    } else if(guesses.length >= maxGuesses) {
      showMessage(`Game oor! Die woord was: ${teikenWoord.toUpperCase()}`, 10000);
      endGame(false);
    }
  }

  submitBtn.addEventListener("click", submitGuess);

  guessInput.addEventListener("keydown", e => {
    if(e.key === "Enter") {
      submitGuess();
    }
  });

  // --- Spel afhandeling ---
  function endGame(won) {
    isGameOver = true;
    updateStats(won);
  }

  // --- Statistiek werk op ---
  function updateStats(won) {
    const todayStr = new Date().toDateString();
    if(stats.lastPlayDate !== todayStr) {
      stats.total++;
      stats.lastPlayDate = todayStr;
      if(won) {
        stats.wins++;
        stats.currentStreak++;
        if(stats.currentStreak > stats.bestStreak) {
          stats.bestStreak = stats.currentStreak;
        }
        const pogingsCount = guesses.length;
        stats.distribution[pogingsCount] = (stats.distribution[pogingsCount] || 0) + 1;
      } else {
        stats.currentStreak = 0;
      }
      saveStatsToStorage();
      updateSidebarStatsUI();
    }
  }

  // --- Statistiek UI opdateer ---
  function updateSidebarStatsUI() {
    totalPlayedSpan.textContent = stats.total;
    winRateSpan.textContent = stats.total === 0 ? "0%" : Math.round((stats.wins / stats.total) * 100) + "%";
    currentStreakSpan.textContent = stats.currentStreak;
    bestStreakSpan.textContent = stats.bestStreak;
    lastPlayDateSpan.textContent = stats.lastPlayDate || "Nog nie";

    distributionBarsDiv.innerHTML = "";

    const maxCount = Math.max(...Object.values(stats.distribution), 1);

    for(let i = 1; i <= maxGuesses; i++) {
      const count = stats.distribution[i] || 0;
      const percentage = stats.total === 0 ? 0 : Math.round((count / stats.total) * 100);
      const bar = document.createElement("div");
      bar.className = "bar";
      bar.style.width = (percentage * 2) + "px"; // Breedte skaal
      bar.textContent = `${i} poging(s): ${count} (${percentage}%)`;
      distributionBarsDiv.appendChild(bar);
    }
  }

  // --- Woordlys in sidebar ---
  function updateSidebarWoorde() {
    woordLysDiv.innerHTML = "";
    woordLys.forEach(w => {
      const span = document.createElement("span");
      span.textContent = w.toUpperCase();
      woordLysDiv.appendChild(span);
    });
  }

  // --- Hamburger menu open/sluit ---
  function openSidebar() {
    sidebar.classList.add("open");
    sidebar.setAttribute("aria-hidden", "false");
    hamburger.setAttribute("aria-expanded", "true");
  }
  function closeSidebar() {
    sidebar.classList.remove("open");
    sidebar.setAttribute("aria-hidden", "true");
    hamburger.setAttribute("aria-expanded", "false");
  }
  hamburger.addEventListener("click", () => {
    if(sidebar.classList.contains("open")) {
      closeSidebar();
    } else {
      openSidebar();
    }
  });
  hamburger.addEventListener("keydown", e => {
    if(e.key === "Enter" || e.key === " ") {
      e.preventDefault();
      hamburger.click();
    }
  });
  closeSidebarBtn.addEventListener("click", closeSidebar);

  // --- Deel resultate ---
  function getResultText() {
    let result = `Woord van die Dag ðŸ‡¿ðŸ‡¦\nEk het die woord "${teikenWoord.toUpperCase()}" probeer raai in ${guesses.length} poging(e):\n\n`;
    guesses.forEach((g, idx) => {
      let line = "";
      for(let i=0; i < wordLength; i++) {
        const letter = g[i];
        if(letter === teikenWoord[i]) {
          line += "ðŸŸ©";
        } else if(teikenWoord.includes(letter)) {
          line += "ðŸŸ¨";
        } else {
          line += "â¬œ";
        }
      }
      result += `${line} (${g.toUpperCase()})\n`;
    });
    result += `\nSpeel Woord van die Dag elke dag!`;
    return result;
  }

  copyResultsBtn.addEventListener("click", () => {
    const resultText = getResultText();
    navigator.clipboard.writeText(resultText).then(() => {
      alert("Resultate gekopieer na clipboard!");
    }).catch(() => {
      alert("KopiÃ«er misluk, probeer weer.");
    });
  });

  whatsappShareBtn.addEventListener("click", () => {
    const resultText = encodeURIComponent(getResultText());
    window.open(`https://wa.me/?text=${resultText}`, "_blank");
  });

  // --- Stats modal open/sluit ---
  practiceBtn.addEventListener("click", () => {
    // Sluit sidebar
    closeSidebar();

    // Toon modal met statistiek
    statsModal.classList.add("open");
    statsModal.focus();
    updateStatsModal();
  });

  statsCloseBtn.addEventListener("click", () => {
    statsModal.classList.remove("open");
  });

  statsModal.addEventListener("click", e => {
    if(e.target === statsModal) {
      statsModal.classList.remove("open");
    }
  });

  function updateStatsModal() {
    statsSummary.innerHTML = `
      <p>Gespeel: ${stats.total}</p>
      <p>Wenkoers: ${stats.total === 0 ? "0%" : Math.round((stats.wins / stats.total) * 100) + "%"}</p>
      <p>Huidige streek: ${stats.currentStreak}</p>
      <p>Langste streek: ${stats.bestStreak}</p>
      <p>Laas gespeel: ${stats.lastPlayDate || "Nog nie"}</p>
    `;

    distributionBarsModal.innerHTML = "";
    const maxCount = Math.max(...Object.values(stats.distribution), 1);
    for(let i = 1; i <= maxGuesses; i++) {
      const count = stats.distribution[i] || 0;
      const percentage = stats.total === 0 ? 0 : Math.round((count / stats.total) * 100);
      const bar = document.createElement("div");
      bar.className = "bar";
      bar.style.width = (percentage * 3) + "px"; // Bietjie wyer in modal
      bar.textContent = `${i} poging(s): ${count} (${percentage}%)`;
      distributionBarsModal.appendChild(bar);
    }
  }

  // --- Statistiek invoer/uitvoer ---
  exportBtn.addEventListener("click", () => {
    const dataStr = JSON.stringify(stats, null, 2);
    alert("Kopieer jou statistiek data:\n\n" + dataStr);
  });

  importBtn.addEventListener("click", () => {
    const input = prompt("Plak jou statistiek data hier:");
    if(input) {
      try {
        const imported = JSON.parse(input);
        if(imported && typeof imported === "object") {
          stats = imported;
          saveStatsToStorage();
          updateSidebarStatsUI();
          alert("Statistiek suksesvol ingevoer!");
        } else {
          alert("Ongeldige data.");
        }
      } catch {
        alert("Kon nie data verwerk nie.");
      }
    }
  });

  // --- Inisialiseer alles ---
  function init() {
    loadStatsFromStorage();
    loadGameFromStorage();
    createBoard();
    renderBoard();
    createKeyboard();
    updateKeyboard();
    updateSidebarStatsUI();
    updateSidebarWoorde();
    guessInput.focus();
  }

  init();

})();
</script>

</body>
</html>


